---
title: "CodeBook"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Data Sources

Jorge L. Reyes-Ortiz(1,2), Davide Anguita(1), Alessandro Ghio(1), Luca Oneto(1) and Xavier Parra(2)
1 - Smartlab - Non-Linear Complex Systems Laboratory
DITEN - Università degli Studi di Genova, Genoa (I-16145), Italy.
2 - CETpD - Technical Research Centre for Dependency Care and Autonomous Living
Universitat Politècnica de Catalunya (BarcelonaTech). Vilanova i la Geltrú (08800), Spain
activityrecognition '@' smartlab.ws

## Data Set Information

The experiments have been carried out with a group of 30 volunteers within an age bracket of 19-48 years. Each person performed six activities (WALKING, WALKING_UPSTAIRS, WALKING_DOWNSTAIRS, SITTING, STANDING, LAYING) wearing a smartphone (Samsung Galaxy S II) on the waist. Using its embedded accelerometer and gyroscope, we captured 3-axial linear acceleration and 3-axial angular velocity at a constant rate of 50Hz. The experiments have been video-recorded to label the data manually. The obtained dataset has been randomly partitioned into two sets, where 70% of the volunteers was selected for generating the training data and 30% the test data.

The sensor signals (accelerometer and gyroscope) were pre-processed by applying noise filters and then sampled in fixed-width sliding windows of 2.56 sec and 50% overlap (128 readings/window). The sensor acceleration signal, which has gravitational and body motion components, was separated using a Butterworth low-pass filter into body acceleration and gravity. The gravitational force is assumed to have only low frequency components, therefore a filter with 0.3 Hz cutoff frequency was used. From each window, a vector of features was obtained by calculating variables from the time and frequency domain.

Check the README.txt file for further details about this dataset.

A video of the experiment including an example of the 6 recorded activities with one of the participants can be seen in the following link: [Web Link]

An updated version of this dataset can be found at [Web Link]. It includes labels of postural transitions between activities and also the full raw inertial signals instead of the ones pre-processed into windows

## Attribute Information

For each record in the dataset it is provided:
- Triaxial acceleration from the accelerometer (total acceleration) and the estimated body acceleration.
- Triaxial Angular velocity from the gyroscope.
- A 561-feature vector with time and frequency domain variables.
- Its activity label.
- An identifier of the subject who carried out the experiment.

## Variable list and their attributes

```{r main, include=FALSE}
library(dplyr)
library(tidyr)
library(knitr)
library(kableExtra)
setwd("D:/Astha/DataScience/Projects/GettingCleaningData/UCI HAR Dataset")
activity_labels<-read.table("activity_labels.txt")    
features<-read.table("features.txt")                  
X_test<-read.table("./test/X_test.txt")              
Y_test<-read.table("./test/y_test.txt")               
subject_test<-read.table("./test/subject_test.txt")   
X_train<-read.table("./train/X_train.txt")               
Y_train<-read.table("./train/y_train.txt")               
subject_train<-read.table("./train/subject_train.txt") 
mean_std_features<-grep("\\bmean\\b|\\bstd\\b",features[,2])  
mean_std_features_val<-grep("\\bmean\\b|\\bstd\\b",features[,2],value = T) 
activityNames_test<-merge(Y_test,activity_labels)     #Use descriptive names for activity
test<-cbind(subject_test,activityNames_test$V2,X_test[,mean_std_features])
names(test)<-c("Subject","Activity",mean_std_features_val)
activityNames_train<-merge(Y_train,activity_labels)
train<-cbind(subject_train,activityNames_train$V2,X_train[,mean_std_features])
names(train)<-c("Subject","Activity",mean_std_features_val)
merge_dat<-rbind(test,train)
variables_dat<-data.frame(Features = mean_std_features_val,Statistic = c("Mean","Standard deviation"),TimeFrequency = c("Time domain","Frequency"),BodyGravity = c("body","gravity"),AccGyro = c("accelerometer","gyroscope"),Signal = c("jerk signal","signal"),XYZ = c("x","y","z"),Mag = c("magnitude","vector"))
variables_dat[which(grepl("mean",variables_dat[,1])),2] = "Mean"
variables_dat[which(grepl("\\bstd\\b",variables_dat[,1])),2] = "Standard deviation"
variables_dat[which(grepl("\\bt",variables_dat[,1])),3] = "Time domain"
variables_dat[which(grepl("\\bf",variables_dat[,1])),3] = "Frequency"
variables_dat[which(grepl("Body",variables_dat[,1])),4] = "body"
variables_dat[which(grepl("Gravity",variables_dat[,1])),4] = "gravity"
variables_dat[which(grepl("Acc",variables_dat[,1])),5] = "accelerometer"
variables_dat[which(grepl("Gyro",variables_dat[,1])),5] = "gyroscope"
variables_dat[which(grepl("Jerk",variables_dat[,1])),6] = "jerk signal"
variables_dat[which(!grepl("Jerk",variables_dat[,1])),6] = "signal"
variables_dat[which(grepl("X",variables_dat[,1])),7] = "x"
variables_dat[which(grepl("Y",variables_dat[,1])),7] = "y"
variables_dat[which(grepl("Z",variables_dat[,1])),7] = "z"
variables_dat[which(grepl("mag",variables_dat[,1])),8] = "magnitude"
variables_dat[which(!grepl("mag",variables_dat[,1])),8] = "vector"
VariablesInfo<-mutate(variables_dat,Description = paste(Statistic,"of",TimeFrequency,"of",BodyGravity,AccGyro,Signal,"in",XYZ,"direction in",Mag))
set<- merge_dat %>% 
  group_by(Subject,Activity) %>%
  summarise_all(funs(mean))
df <- data.frame(
    row.names = NULL,
    Features = names(set),
    class = sapply(set, class),
    range = sapply(set, function(x)
      if (class(x) == "factor")
        paste(levels(x), collapse = " / ")
      else if (class(x) == "numeric" ||
               class(x) == "integer")
        paste(min(x), max(x), sep = "  /  ")
      else
        class(x)),
    mean = sapply(set, function(x)
      if (class(x) == "numeric")
        mean(x)
      else
        "Not available")
  )
```

### Variables Description

```{r desc, echo=FALSE, results='asis',warning = FALSE}
VariablesInfo[,c(1,9)]%>%
  kable("markdown", escape = F, align = "l") %>%
  kable_styling("striped", full_width = F, position = "float_right")
```

### Variables statistics
```{r stats, echo=FALSE, results='asis',warning = FALSE}
df%>%
  kable("markdown", escape = F, align = "c") %>%
  kable_styling("striped", full_width = F, position = "float_right")
```

